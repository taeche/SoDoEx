//////////////////////////////////////////////
// Ninja Announcements Admin JS 2012 WP Ninjas  //
// http://wpninjas.net//
//////////////////////////////////////////////
jQuery(document).ready(function(a){var b=ninja_annc_strings.activate;var c=ninja_annc_strings.deactivate;var d=ninja_annc_strings.save;a(".ninja-annc-ignore-dates").live("change",function(){var b=this.id.replace("ignore_dates","");if(this.checked){var c=true}else{var c=false}a(".ninja-annc-schedule").attr("disabled",c)});a("#select_all_days").live("click",function(){var b=this.checked;a(".ninja-day").attr("checked",b)});a(".date").datepicker();if(adminpage=="edit-tags-php"){a("#ninja_override").change(function(){if(this.checked){a(".ninja-annc-group-settings").show("fast")}else{a(".ninja-annc-group-settings").hide("fast")}});var e=ajaxurl+"?action=ninja_annc_autocomplete&type=post";a("#post_attach").tokenInput(e,{preventDuplicates:true});var e=ajaxurl+"?action=ninja_annc_autocomplete&type=page";a("#page_attach").tokenInput(e,{preventDuplicates:true});a(".ninja-annc-post-attach").each(function(){a("#post_attach").tokenInput("add",{id:this.id,name:this.value})});a(".ninja-annc-page-attach").each(function(){a("#page_attach").tokenInput("add",{id:this.id,name:this.value})});a("#select_all_cats").live("click",function(){var b=this.checked;a(".ninja-annc-cat").attr("checked",b)});a("#closed_time").change(function(){if(this.value=="days"){a("#closed_days_wrapper").show()}else{a("#closed_days_wrapper").hide()}});a("#show_close").change(function(){if(this.checked){var b=false}else{var b=true}a(".ninja-annc-close-setting").attr("disabled",b)});a(".ninja-annc-group-activate").live("click",function(b){b.preventDefault();var d=this.id.replace("ninja_annc_group_","");a("#ninja_annc_group_"+d).html("<img src='"+settings.plugin_url+"/images/loading.gif'>");a.post(ajaxurl,{term_id:d,action:"ninja_annc_group_activate"},function(b){a("#ninja_annc_group_"+d).html(c);a("#ninja_annc_group_"+d).removeClass("ninja-annc-group-activate");a("#ninja_annc_group_"+d).addClass("ninja-annc-group-deactivate");a("#tag-"+d).addClass("ninja-annc-active");a("#tag-"+d).removeClass("ninja-annc-inactive")})});a(".ninja-annc-group-deactivate").live("click",function(c){c.preventDefault();var d=this.id.replace("ninja_annc_group_","");a("#ninja_annc_group_"+d).html("<img src='"+settings.plugin_url+"/images/loading.gif'>");a.post(ajaxurl,{term_id:d,action:"ninja_annc_group_deactivate"},function(c){a("#ninja_annc_group_"+d).html(b);a("#ninja_annc_group_"+d).removeClass("ninja-annc-group-deactivate");a("#ninja_annc_group_"+d).addClass("ninja-annc-group-activate");a("#tag-"+d).addClass("ninja-annc-inactive");a("#tag-"+d).removeClass("ninja-annc-active")})});a("#the-list tr").each(function(){var b=this.id.replace("tag-","");if(a("#ninja_annc_group_"+b).hasClass("ninja-annc-group-activate")){a(this).addClass("ninja-annc-inactive")}else{a(this).addClass("ninja-annc-active")}});a("#display_on_posts").change(function(){if(!this.checked){a("#advanced_post").attr("checked",false)}});a("#display_on_pages").change(function(){if(!this.checked){a("#advanced_page").attr("checked",false)}});a("#advanced_post").change(function(){if(this.checked){a(".ninja-annc-advanced-post-div").removeClass("ninja-annc-hidden")}else{a(".ninja-annc-advanced-post-div").addClass("ninja-annc-hidden")}});a("#advanced_page").change(function(){if(this.checked){a(".ninja-annc-advanced-page-div").removeClass("ninja-annc-hidden")}else{a(".ninja-annc-advanced-page-div").addClass("ninja-annc-hidden")}});a("#advanced_cat").change(function(){if(this.checked){a(".ninja-annc-advanced-cat-div").removeClass("ninja-annc-hidden")}else{a(".ninja-annc-advanced-cat-div").addClass("ninja-annc-hidden")}});a(".ninja-day").change(function(){if(!this.checked){a("#select_all_days").attr("checked",false)}else{var b=true;a(".ninja-day").each(function(){if(!this.checked){b=false}});if(b){a("#select_all_days").attr("checked",true)}}})}else if(adminpage=="widgets-php"){a(".ninja-annc-widget-select").live("change",function(){var b=0;var c=this.value;var d=this.id.replace("annc_id","");a("#"+d+"ninja_annc_loading").show();a.post(ajaxurl,{group:b,post_id:c,action:"ninja_annc_widget_change"},function(b){a("#"+d+"begin_date").val(b.begin_date);a("#"+d+"begin_hr").val(b.begin_hr);a("#"+d+"begin_min").val(b.begin_min);a("#"+d+"begin_ampm").val(b.begin_ampm);a("#"+d+"end_date").val(b.end_date);a("#"+d+"end_hr").val(b.end_hr);a("#"+d+"end_min").val(b.end_min);a("#"+d+"end_ampm").val(b.end_ampm);if(b.post_status=="publish"){var c=true}else{var c=false}a("#"+d+"active").attr("checked",c);if(b.ignore_dates=="1"){var e=true}else{var e=false}a("#"+d+"begin_date").attr("disabled",e);a("#"+d+"begin_hr").attr("disabled",e);a("#"+d+"begin_min").attr("disabled",e);a("#"+d+"begin_ampm").attr("disabled",e);a("#"+d+"end_date").attr("disabled",e);a("#"+d+"end_hr").attr("disabled",e);a("#"+d+"end_min").attr("disabled",e);a("#"+d+"end_ampm").attr("disabled",e);a("#"+d+"ignore_dates").attr("checked",e);a("#"+d+"ninja_annc_loading").hide()})});a(".ninja-annc-widget-group-select").live("change",function(){var b=1;var c=this.value;var d=this.id.replace("group_id","");a("#"+d+"ninja_annc_loading").show();a.post(ajaxurl,{group:b,post_id:c,action:"ninja_annc_widget_change"},function(b){a("#"+d+"begin_date").val(b.begin_date);a("#"+d+"begin_hr").val(b.begin_hr);a("#"+d+"begin_min").val(b.begin_min);a("#"+d+"begin_ampm").val(b.begin_ampm);a("#"+d+"end_date").val(b.end_date);a("#"+d+"end_hr").val(b.end_hr);a("#"+d+"end_min").val(b.end_min);a("#"+d+"end_ampm").val(b.end_ampm);if(b.active==1){var c=true}else{var c=false}a("#"+d+"active").attr("checked",c);if(b.ignore_dates=="1"){var e=true}else{var e=false}a("#"+d+"begin_date").attr("disabled",e);a("#"+d+"begin_hr").attr("disabled",e);a("#"+d+"begin_min").attr("disabled",e);a("#"+d+"begin_ampm").attr("disabled",e);a("#"+d+"end_date").attr("disabled",e);a("#"+d+"end_hr").attr("disabled",e);a("#"+d+"end_min").attr("disabled",e);a("#"+d+"end_ampm").attr("disabled",e);a("#"+d+"ignore_dates").attr("checked",e);a("#"+d+"ninja_annc_loading").hide()})});a(".ninja-annc-ignore-dates").live("change",function(){var b=this.id.replace("ignore_dates","");if(this.checked){var c=true}else{var c=false}a("."+b+"ninja-annc-schedule").attr("disabled",c)})}else{a("#display_on_posts").change(function(){if(!this.checked){a("#advanced_post").attr("checked",false);a(".ninja-annc-advanced-post-div").addClass("ninja-annc-hidden")}});a("#display_on_pages").change(function(){if(!this.checked){a("#advanced_page").attr("checked",false);a(".ninja-annc-advanced-page-div").addClass("ninja-annc-hidden")}});a("#advanced_post").change(function(){if(this.checked){a(".ninja-annc-advanced-post-div").removeClass("ninja-annc-hidden")}else{a(".ninja-annc-advanced-post-div").addClass("ninja-annc-hidden")}});a("#advanced_page").change(function(){if(this.checked){a(".ninja-annc-advanced-page-div").removeClass("ninja-annc-hidden")}else{a(".ninja-annc-advanced-page-div").addClass("ninja-annc-hidden")}});a("#advanced_cat").change(function(){if(this.checked){a(".ninja-annc-advanced-cat-div").removeClass("ninja-annc-hidden")}else{a(".ninja-annc-advanced-cat-div").addClass("ninja-annc-hidden")}});a(".ninja-day").change(function(){if(!this.checked){a("#select_all_days").attr("checked",false)}else{var b=true;a(".ninja-day").each(function(){if(!this.checked){b=false}});if(b){a("#select_all_days").attr("checked",true)}}});if(a("#ignore_dates").is(":checked")){a(".ninja-annc-schedule").attr("disabled",true)}if(a("li.publish").length>0){var e=a("li.publish").html();e=e.replace("Published","Active");a("li.publish").html(e)}if(a("li.draft").length>0){var e=a("li.draft").html();e=e.replace("Draft","Inactive");a("li.draft").html(e)}var f=settings.post_status;if(f=="publish"){a("#publish").click(function(){a("#post_status").val("draft")});a("#minor-publishing-actions").prepend('<div id="save-action"><input type="submit" name="save" id="save-post" value="'+d+'" tabindex="4" class="button button-highlighted"><img src="http://dev.wpninjas.net/wp-admin/images/wpspin_light.gif" class="ajax-loading" id="draft-ajax-loading" alt=""></div>')}if(a("#message").length>0){var e=a("#message").html();e=e.replace("Post","Announcement");e=e.replace("draft updated","Deactivated");e=e.replace("published","Activated");e=e.replace('<a target="_blank" href="http://dev.wpninjas.net/?post_type=ninja_annc&p=1225&preview=true">Preview post</a>',"");e=e.replace('<a href="http://dev.wpninjas.net/ninja_annc/test/">View post</a>',"");a("#message").html(e)}a("#the-list tr").each(function(){var b=this.id.replace("post-","");var c=this.id.replace("tag-","");if(a("#ninja_annc_"+b).hasClass("ninja-annc-activate")){a(this).addClass("ninja-annc-inactive")}else{a(this).addClass("ninja-annc-active")}});a(".ninja-annc-activate").live("click",function(b){b.preventDefault();var d=this.id.replace("ninja_annc_","");a("#ninja_annc_"+d).html("<img src='"+settings.plugin_url+"/images/loading.gif'>");a.post(ajaxurl,{post_id:d,action:"ninja_annc_activate"},function(b){a("#ninja_annc_"+d).html(c);a("#ninja_annc_"+d).removeClass("ninja-annc-activate");a("#ninja_annc_"+d).addClass("ninja-annc-deactivate");a("#post-"+d).addClass("ninja-annc-active");a("#post-"+d).removeClass("ninja-annc-inactive")})});a(".ninja-annc-deactivate").live("click",function(c){c.preventDefault();var d=this.id.replace("ninja_annc_","");a("#ninja_annc_"+d).html("<img src='"+settings.plugin_url+"/images/loading.gif'>");a.post(ajaxurl,{post_id:d,action:"ninja_annc_deactivate"},function(c){a("#ninja_annc_"+d).html(b);a("#ninja_annc_"+d).removeClass("ninja-annc-deactivate");a("#ninja_annc_"+d).addClass("ninja-annc-activate");a("#post-"+d).addClass("ninja-annc-inactive");a("#post-"+d).removeClass("ninja-annc-active")})});if(a("td.post-title").length>0){a("td.post-title").each(function(){var b=a(this).html();b=b.replace("</a> - ","</a>");a(this).html(b)})}if(a("select[name='action']").length>0){a("<option>").val("activate").text(b).appendTo("select[name='action']");a("<option>").val("deactivate").text(c).appendTo("select[name='action']")}var e=ajaxurl+"?action=ninja_annc_autocomplete&type=post";a("#post_attach").tokenInput(e,{preventDuplicates:true});var e=ajaxurl+"?action=ninja_annc_autocomplete&type=page";a("#page_attach").tokenInput(e,{preventDuplicates:true});a(".ninja-annc-post-attach").each(function(){a("#post_attach").tokenInput("add",{id:this.id,name:this.value})});a(".ninja-annc-page-attach").each(function(){a("#page_attach").tokenInput("add",{id:this.id,name:this.value})});a("#select_all_cats").live("click",function(){var b=this.checked;a(".ninja-annc-cat").attr("checked",b)});a(".ninja-annc-cat").live("click",function(){var b=this.checked;if(!b){a("#select_all_cats").attr("checked",false)}});a("#closed_time").change(function(){if(this.value=="days"){a("#closed_days_wrapper").show()}else{a("#closed_days_wrapper").hide()}});a("#show_close").change(function(){if(this.checked){var b=false}else{var b=true}a(".ninja-annc-close-setting").attr("disabled",b)})}})